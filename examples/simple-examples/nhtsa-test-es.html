<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Testing module imports</title>

    <script type="module">
      console.log(`Successfully imported via ESModule import`)

      const logResults = (results) => console.log('Results: ', results)

      document
        .getElementById('GetCanadianVehicleSpecifications')
        .addEventListener('click', async () => {
          /* Lazy Loading */
          const { GetModelsForMakeYear } = await import(
            '../../packages/lib/dist/nhtsa-api-wrapper.mjs'
          ).catch((err) => err)

          const results = await GetModelsForMakeYear('test')
            .then((results) => {
              logResults(results)
              return results
            })
            .catch((err) => console.log(err))

          return results
        })

      document
        .getElementById('DecodeVin')
        .addEventListener('click', async () => {
          /* Lazy Loading */
          const { GetEquipmentPlantCodes } = await import(
            '../../dist/nhtsa-api-wrapper.mjs'
          ).catch((err) => err)

          const { Results } = await GetEquipmentPlantCodes({
            year: 2015,
            equipmentType: 1,
            reportType: 'all'
          })
            .then((results) => results)
            .catch((err) => console.log(err))

          console.log(Results)
          document.querySelector(
            '#DecodeVinResults'
          ).innerHTML = `${JSON.stringify(Results)}`
        })

      document
        .getElementById('isValidVin')
        .addEventListener('click', async function () {
          const { isValidVin } = await import(
            '../../dist/nhtsa-api-wrapper.mjs'
          )
          const result = isValidVin('WVWHV71K69W144983')
          console.log(`isValidVin result: ${result}`)
          document.getElementById('isValidVinResults').innerText = result
        })
    </script>
  </head>
  <body>
    <h2>
      <btn id="GetCanadianVehicleSpecifications"
        >Click to console.log GetCanadianVehicleSpecifications results</btn
      >
      <div id="GetCanadianVehicleSpecificationsResults"></div>
    </h2>
    <h2>
      <btn id="DecodeVin">Click to console.log NHTSA.DecodeWMI() results</btn>
      <div id="DecodeVinResults"></div>
    </h2>
    <h2>
      <btn id="isValidVin">Click to console.log isValidVin() results</btn>
      <div id="isValidVinResults"></div>
    </h2>
  </body>
</html>
